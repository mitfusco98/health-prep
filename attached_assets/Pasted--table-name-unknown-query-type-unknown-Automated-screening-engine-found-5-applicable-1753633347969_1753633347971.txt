 "table_name": "unknown", "query_type": "unknown"}}
üîç Automated screening engine found 5 applicable screenings for Emma Fisher: ['Mammography', 'Pap Smear', 'Lipid Panel', 'Vaccination History', 'HbA1c Test']
üìã Default items filtering is now handled only in prep sheet template, not in parsing logic
{"timestamp": "2025-07-27T16:21:54.484254Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [e1e6981e]:", "module": "app", "function": "handle_unexpected_error", "line": 425, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.484954Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [e1e6981e]:", "module": "app", "function": "handle_unexpected_error", "line": 425, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.485322Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: AttributeError", "module": "app", "function": "handle_unexpected_error", "line": 426, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.485620Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: AttributeError", "module": "app", "function": "handle_unexpected_error", "line": 426, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.485957Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: 'Screening' object has no attribute 'priority'", "module": "app", "function": "handle_unexpected_error", "line": 427, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.486216Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: 'Screening' object has no attribute 'priority'", "module": "app", "function": "handle_unexpected_error", "line": 427, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.486599Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/patients/2/prep_sheet?v=1753633280", "module": "app", "function": "handle_unexpected_error", "line": 428, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.486858Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/patients/2/prep_sheet?v=1753633280", "module": "app", "function": "handle_unexpected_error", "line": 428, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.487167Z", "level": "CRITICAL", "logger": "app", "message": "Method: GET", "module": "app", "function": "handle_unexpected_error", "line": 429, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.487360Z", "level": "CRITICAL", "logger": "app", "message": "Method: GET", "module": "app", "function": "handle_unexpected_error", "line": 429, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.487586Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.1.25", "module": "app", "function": "handle_unexpected_error", "line": 430, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.487779Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.1.25", "module": "app", "function": "handle_unexpected_error", "line": 430, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.490911Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/demo_routes.py\", line 967, in generate_patient_prep_sheet\n    prep_sheet_data = generate_prep_sheet(\n                      ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils.py\", line 712, in generate_prep_sheet\n    return _prep_sheet_generator.generate(prep_data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils.py\", line 494, in generate\n    \"alerts\": self._generate_all_alerts(prep_data),\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils.py\", line 530, in _generate_all_alerts\n    alerts.extend(generator(prep_data))\n                  ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils.py\", line 584, in _generate_screening_alerts\n    \"details\": f\"Overdue by {days_overdue} days. Priority: {screening.priority}\",\n                                                            ^^^^^^^^^^^^^^^^^^\nAttributeError: 'Screening' object has no attribute 'priority'\n", "module": "app", "function": "handle_unexpected_error", "line": 431, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.491416Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/demo_routes.py\", line 967, in generate_patient_prep_sheet\n    prep_sheet_data = generate_prep_sheet(\n                      ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils.py\", line 712, in generate_prep_sheet\n    return _prep_sheet_generator.generate(prep_data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils.py\", line 494, in generate\n    \"alerts\": self._generate_all_alerts(prep_data),\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils.py\", line 530, in _generate_all_alerts\n    alerts.extend(generator(prep_data))\n                  ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils.py\", line 584, in _generate_screening_alerts\n    \"details\": f\"Overdue by {days_overdue} days. Priority: {screening.priority}\",\n                                                            ^^^^^^^^^^^^^^^^^^\nAttributeError: 'Screening' object has no attribute 'priority'\n", "module": "app", "function": "handle_unexpected_error", "line": 431, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
{"timestamp": "2025-07-27T16:21:54.763969Z", "level": "WARNING", "logger": "api_access_middleware", "message": "API response: /patients/2/prep_sheet -> 500", "module": "api_access_middleware", "function": "log_api_response_status", "line": 449, "thread": 139852950523072, "process": 1432, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753633312.4073172}}
