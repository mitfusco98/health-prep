- Sample recent log: admin_dashboard_access at 2025-06-30 23:14:19.263297
{"timestamp": "2025-06-30T23:16:10.050282Z", "level": "ERROR", "logger": "admin_log_viewer", "message": "Error in admin logs viewer: (psycopg2.OperationalError) SSL connection has been closed unexpectedly\n\n[SQL: SELECT count(*) AS count_1 \nFROM (SELECT admin_logs.id AS admin_logs_id, admin_logs.timestamp AS admin_logs_timestamp, admin_logs.user_id AS admin_logs_user_id, admin_logs.event_type AS admin_logs_event_type, admin_logs.event_details AS admin_logs_event_details, admin_logs.request_id AS admin_logs_request_id, admin_logs.ip_address AS admin_logs_ip_address, admin_logs.user_agent AS admin_logs_user_agent \nFROM admin_logs \nWHERE admin_logs.timestamp >= %(timestamp_1)s) AS anon_1]\n[parameters: {'timestamp_1': datetime.datetime(2025, 6, 29, 23, 16, 10, 19908)}]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "module": "admin_log_viewer", "function": "admin_logs", "line": 209, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.057128Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [c2b95ec6]:", "module": "app", "function": "handle_unexpected_error", "line": 419, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.057333Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [c2b95ec6]:", "module": "app", "function": "handle_unexpected_error", "line": 419, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.057558Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: UndefinedError", "module": "app", "function": "handle_unexpected_error", "line": 420, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.057731Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: UndefinedError", "module": "app", "function": "handle_unexpected_error", "line": 420, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.057918Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: 'current_filters' is undefined", "module": "app", "function": "handle_unexpected_error", "line": 421, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.058165Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: 'current_filters' is undefined", "module": "app", "function": "handle_unexpected_error", "line": 421, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.058473Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/admin/logs?date_range=&search=&event_type=authentication&user=&ip_address=&sort=desc&date_from=2025-06-30&date_to=2025-06-30&per_page=25", "module": "app", "function": "handle_unexpected_error", "line": 422, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.058767Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/admin/logs?date_range=&search=&event_type=authentication&user=&ip_address=&sort=desc&date_from=2025-06-30&date_to=2025-06-30&per_page=25", "module": "app", "function": "handle_unexpected_error", "line": 422, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.059067Z", "level": "CRITICAL", "logger": "app", "message": "Method: GET", "module": "app", "function": "handle_unexpected_error", "line": 423, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.059229Z", "level": "CRITICAL", "logger": "app", "message": "Method: GET", "module": "app", "function": "handle_unexpected_error", "line": 423, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.059429Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.4.25", "module": "app", "function": "handle_unexpected_error", "line": 424, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.059577Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.4.25", "module": "app", "function": "handle_unexpected_error", "line": 424, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.443780Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 945, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.OperationalError: SSL connection has been closed unexpectedly\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/admin_log_viewer.py\", line 156, in admin_logs\n    ).count()\n      ^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 3147, in count\n    self._legacy_from_self(col).enable_eagerloads(False).scalar()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2836, in scalar\n    ret = self.one()\n          ^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2809, in one\n    return self._iter().one()  # type: ignore\n           ^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2858, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 523, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1843, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2352, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 945, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL connection has been closed unexpectedly\n\n[SQL: SELECT count(*) AS count_1 \nFROM (SELECT admin_logs.id AS admin_logs_id, admin_logs.timestamp AS admin_logs_timestamp, admin_logs.user_id AS admin_logs_user_id, admin_logs.event_type AS admin_logs_event_type, admin_logs.event_details AS admin_logs_event_details, admin_logs.request_id AS admin_logs_request_id, admin_logs.ip_address AS admin_logs_ip_address, admin_logs.user_agent AS admin_logs_user_agent \nFROM admin_logs \nWHERE admin_logs.timestamp >= %(timestamp_1)s) AS anon_1]\n[parameters: {'timestamp_1': datetime.datetime(2025, 6, 29, 23, 16, 10, 19908)}]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/admin_middleware.py\", line 74, in decorated_function\n    return f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/admin_log_viewer.py\", line 210, in admin_logs\n    return render_template(\n           ^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py\", line 150, in render_template\n    return _render(app, template, context)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py\", line 131, in _render\n    rv = template.render(context)\n         ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py\", line 1295, in render\n    self.environment.handle_exception()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n  File \"/home/runner/workspace/templates/admin_logs.html\", line 2, in top-level template code\n    {% extends \"base.html\" %}\n  File \"/home/runner/workspace/templates/base.html\", line 120, in top-level template code\n    {% block content %}{% endblock %}\n    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/templates/admin_logs.html\", line 95, in block 'content'\n    <div id=\"filtersPanel\" class=\"collapse {% if current_filters.event_type or current_filters.user or current_filters.date_from or current_filters.search %}show{% endif %}\">\n    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py\", line 490, in getattr\n    return getattr(obj, attribute)\n           ^^^^^^^^^^^^^^^^^^^^^^^\njinja2.exceptions.UndefinedError: 'current_filters' is undefined\n", "module": "app", "function": "handle_unexpected_error", "line": 425, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:10.444198Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 945, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.OperationalError: SSL connection has been closed unexpectedly\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/admin_log_viewer.py\", line 156, in admin_logs\n    ).count()\n      ^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 3147, in count\n    self._legacy_from_self(col).enable_eagerloads(False).scalar()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2836, in scalar\n    ret = self.one()\n          ^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2809, in one\n    return self._iter().one()  # type: ignore\n           ^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2858, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 523, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1843, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2352, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 945, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL connection has been closed unexpectedly\n\n[SQL: SELECT count(*) AS count_1 \nFROM (SELECT admin_logs.id AS admin_logs_id, admin_logs.timestamp AS admin_logs_timestamp, admin_logs.user_id AS admin_logs_user_id, admin_logs.event_type AS admin_logs_event_type, admin_logs.event_details AS admin_logs_event_details, admin_logs.request_id AS admin_logs_request_id, admin_logs.ip_address AS admin_logs_ip_address, admin_logs.user_agent AS admin_logs_user_agent \nFROM admin_logs \nWHERE admin_logs.timestamp >= %(timestamp_1)s) AS anon_1]\n[parameters: {'timestamp_1': datetime.datetime(2025, 6, 29, 23, 16, 10, 19908)}]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/admin_middleware.py\", line 74, in decorated_function\n    return f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/admin_log_viewer.py\", line 210, in admin_logs\n    return render_template(\n           ^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py\", line 150, in render_template\n    return _render(app, template, context)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py\", line 131, in _render\n    rv = template.render(context)\n         ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py\", line 1295, in render\n    self.environment.handle_exception()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n  File \"/home/runner/workspace/templates/admin_logs.html\", line 2, in top-level template code\n    {% extends \"base.html\" %}\n  File \"/home/runner/workspace/templates/base.html\", line 120, in top-level template code\n    {% block content %}{% endblock %}\n    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/templates/admin_logs.html\", line 95, in block 'content'\n    <div id=\"filtersPanel\" class=\"collapse {% if current_filters.event_type or current_filters.user or current_filters.date_from or current_filters.search %}show{% endif %}\">\n    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py\", line 490, in getattr\n    return getattr(obj, attribute)\n           ^^^^^^^^^^^^^^^^^^^^^^^\njinja2.exceptions.UndefinedError: 'current_filters' is undefined\n", "module": "app", "function": "handle_unexpected_error", "line": 425, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
{"timestamp": "2025-06-30T23:16:11.384301Z", "level": "WARNING", "logger": "api_access_middleware", "message": "API response: /admin/logs -> 500", "module": "api_access_middleware", "function": "log_api_response_status", "line": 449, "thread": 140260691613184, "process": 430, "request": {"method": "GET", "path": "/admin/logs", "remote_addr": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_logs"}, "session": {"session_id": "cuUuGHgf_AKDcw4Glg41E8h6xZS3fcngAYn3cFsLxlw", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.4.25", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1751325369.4468641}}
