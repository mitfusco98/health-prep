ðŸš€ Started 2 background screening workers
{"timestamp": "2025-07-26T22:23:29.809379Z", "level": "WARNING", "logger": "profiler", "message": "Slow database query (1533.95ms): SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_p...", "module": "profiler", "function": "after_cursor_execute", "line": 276, "thread": 140661586934976, "process": 218, "request": {"method": "GET", "path": "/documents/repository", "remote_addr": "10.82.11.159", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "document_repository"}, "session": {"session_id": "QVxOnu73_iCQs85uTZvb12ejyqPFjqBYlrxjx0GDzoY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.11.159", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753568608.204941}, "extra": {"duration_ms": 1533.9488540012098, "query": "SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_patient_id, medical_document.filename AS medical_document_filename, medical_document.document_name AS medical_document_document_name, medical_document.document_type AS medical_document_document_type, medical_document.content AS medical_document_content, medical_document.binary_content AS medical_document_binary_content, medical_document.is_binary AS medical_document_is_binary, medical_document.mime", "event_category": "performance", "table_name": "unknown", "query_type": "unknown"}}
{"timestamp": "2025-07-26T22:23:48.988504Z", "level": "WARNING", "logger": "profiler", "message": "Slow database query (2570.21ms): SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_p...", "module": "profiler", "function": "after_cursor_execute", "line": 276, "thread": 140661586934976, "process": 218, "request": {"method": "GET", "path": "/documents/repository", "remote_addr": "10.82.3.207", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "document_repository"}, "session": {"session_id": "QVxOnu73_iCQs85uTZvb12ejyqPFjqBYlrxjx0GDzoY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.3.207", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753568626.353069}, "extra": {"duration_ms": 2570.2058339993528, "query": "SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_patient_id, medical_document.filename AS medical_document_filename, medical_document.document_name AS medical_document_document_name, medical_document.document_type AS medical_document_document_type, medical_document.content AS medical_document_content, medical_document.binary_content AS medical_document_binary_content, medical_document.is_binary AS medical_document_is_binary, medical_document.mime", "event_category": "performance", "table_name": "unknown", "query_type": "unknown"}}
Admin Dashboard: Found 20 recent logs, 0 login failures, 13 total activities in last 24h
{"timestamp": "2025-07-26T22:24:08.515979Z", "level": "WARNING", "logger": "profiler", "message": "Slow database query (2136.45ms): SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_p...", "module": "profiler", "function": "after_cursor_execute", "line": 276, "thread": 140661586934976, "process": 218, "request": {"method": "GET", "path": "/admin_dashboard", "remote_addr": "10.82.11.159", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "admin_dashboard"}, "session": {"session_id": "QVxOnu73_iCQs85uTZvb12ejyqPFjqBYlrxjx0GDzoY", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.11.159", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753568645.1188884}, "extra": {"duration_ms": 2136.447633998614, "query": "SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_patient_id, medical_document.filename AS medical_document_filename, medical_document.document_name AS medical_document_document_name, medical_document.document_type AS medical_document_document_type, medical_document.content AS medical_document_content, medical_document.binary_content AS medical_document_binary_content, medical_document.is_binary AS medical_document_is_binary, medical_document.mime", "event_category": "performance", "table_name": "unknown", "query_type": "unknown"}}
Admin Dashboard Template Data:
- Total patients: 12
- Recent admin logs count: 20
- Recent login failures: 0
- Sample recent log: admin_dashboard_access at 2025-07-26 22:24:05.312070
{"timestamp": "2025-07-26T22:24:17.749651Z", "level": "WARNING", "logger": "profiler", "message": "Slow database query (2554.87ms): SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_p...", "module": "profiler", "function": "after_cursor_execute", "line": 276, "thread": 140661586934976, "process": 218, "request": {"method": "GET", "path": "/admin/ocr-dashboard", "remote_addr": "10.82.11.159", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "ocr_dashboard"}, "session": {"session_id": "QVxOnu73_iCQs85uTZvb12ejyqPFjqBYlrxjx0GDzoY", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.11.159", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753568650.9783432}, "extra": {"duration_ms": 2554.8706379995565, "query": "SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_patient_id, medical_document.filename AS medical_document_filename, medical_document.document_name AS medical_document_document_name, medical_document.document_type AS medical_document_document_type, medical_document.content AS medical_document_content, medical_document.binary_content AS medical_document_binary_content, medical_document.is_binary AS medical_document_is_binary, medical_document.mime", "event_category": "performance", "table_name": "unknown", "query_type": "unknown"}}
{"timestamp": "2025-07-26T22:24:19.600891Z", "level": "WARNING", "logger": "profiler", "message": "Slow database query (1823.14ms): SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_p...", "module": "profiler", "function": "after_cursor_execute", "line": 276, "thread": 140661586934976, "process": 218, "request": {"method": "GET", "path": "/admin/ocr-dashboard", "remote_addr": "10.82.11.159", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "ocr_dashboard"}, "session": {"session_id": "QVxOnu73_iCQs85uTZvb12ejyqPFjqBYlrxjx0GDzoY", "user_id": 2, "username": "mfusillo"}, "security": {"ip_address": "10.82.11.159", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753568650.9783432}, "extra": {"duration_ms": 1823.1413920002524, "query": "SELECT medical_document.id AS medical_document_id, medical_document.patient_id AS medical_document_patient_id, medical_document.filename AS medical_document_filename, medical_document.document_name AS medical_document_document_name, medical_document.document_type AS medical_document_document_type, medical_document.content AS medical_document_content, medical_document.binary_content AS medical_document_binary_content, medical_document.is_binary AS medical_document_is_binary, medical_document.mime", "event_category": "performance", "table_name": "unknown", "query_type": "unknown"}}
ðŸš€ Using enhanced screening engine for /screenings page
âœ… Generated 47 screenings using enhanced engine
Error rendering screening_list.html: 'demo_routes.ScreeningProxy object' has no attribute 'get_valid_documents_with_access_check'
Traceback (most recent call last):
  File "/home/runner/workspace/demo_routes.py", line 3999, in screening_list
    return render_template(
           ^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/screening_list.html", line 1, in top-level template code
    {% extends 'base_demo.html' %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/base_demo.html", line 132, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/screening_list.html", line 416, in block 'content'
    {% set valid_documents = screening.get_valid_documents_with_access_check() %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'demo_routes.ScreeningProxy object' has no attribute 'get_valid_documents_with_access_check'