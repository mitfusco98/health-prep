{"timestamp": "2025-07-29T20:26:22.745030Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [3cb84afc]:", "module": "app", "function": "handle_unexpected_error", "line": 435, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.747566Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [3cb84afc]:", "module": "app", "function": "handle_unexpected_error", "line": 435, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.747800Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: NameError", "module": "app", "function": "handle_unexpected_error", "line": 436, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.747961Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: NameError", "module": "app", "function": "handle_unexpected_error", "line": 436, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.748137Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: name 'prep_sheet_filter_items' is not defined", "module": "app", "function": "handle_unexpected_error", "line": 437, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.748296Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: name 'prep_sheet_filter_items' is not defined", "module": "app", "function": "handle_unexpected_error", "line": 437, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.748582Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/patients/1/prep_sheet?v=1753820775", "module": "app", "function": "handle_unexpected_error", "line": 438, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.748739Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/patients/1/prep_sheet?v=1753820775", "module": "app", "function": "handle_unexpected_error", "line": 438, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.748938Z", "level": "CRITICAL", "logger": "app", "message": "Method: GET", "module": "app", "function": "handle_unexpected_error", "line": 439, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.749098Z", "level": "CRITICAL", "logger": "app", "message": "Method: GET", "module": "app", "function": "handle_unexpected_error", "line": 439, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.749339Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.10.13", "module": "app", "function": "handle_unexpected_error", "line": 440, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.749468Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.10.13", "module": "app", "function": "handle_unexpected_error", "line": 440, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.759185Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/demo_routes.py\", line 1083, in generate_patient_prep_sheet\n    prep_sheet_filter_items=prep_sheet_filter_items,  # Decoupled filtering for prep sheet only\n                            ^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name 'prep_sheet_filter_items' is not defined\n", "module": "app", "function": "handle_unexpected_error", "line": 441, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:22.759559Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/demo_routes.py\", line 1083, in generate_patient_prep_sheet\n    prep_sheet_filter_items=prep_sheet_filter_items,  # Decoupled filtering for prep sheet only\n                            ^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name 'prep_sheet_filter_items' is not defined\n", "module": "app", "function": "handle_unexpected_error", "line": 441, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
{"timestamp": "2025-07-29T20:26:23.022826Z", "level": "WARNING", "logger": "api_access_middleware", "message": "API response: /patients/1/prep_sheet -> 500", "module": "api_access_middleware", "function": "log_api_response_status", "line": 449, "thread": 139742457507008, "process": 435, "request": {"method": "GET", "path": "/patients/1/prep_sheet", "remote_addr": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "0HNKiuMlmU9VHuLQz8DJdSFSp2ei7GVikBd5hF6igKY", "user_id": null, "username": null}, "security": {"ip_address": "10.82.10.13", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753820781.001733}}
