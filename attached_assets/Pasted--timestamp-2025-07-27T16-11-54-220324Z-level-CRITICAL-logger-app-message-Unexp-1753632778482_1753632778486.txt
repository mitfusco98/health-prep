{"timestamp": "2025-07-27T16:11:54.220324Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [363fb17e]:", "module": "app", "function": "handle_unexpected_error", "line": 425, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.220779Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [363fb17e]:", "module": "app", "function": "handle_unexpected_error", "line": 425, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.221126Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: LoaderStrategyException", "module": "app", "function": "handle_unexpected_error", "line": 426, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.221390Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: LoaderStrategyException", "module": "app", "function": "handle_unexpected_error", "line": 426, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.221723Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: Can't apply \"joined loader\" strategy to property \"Screening.screening_type\", which is a \"column property\"; this loader strategy is intended to be used with a \"relationship property\".", "module": "app", "function": "handle_unexpected_error", "line": 427, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.221977Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: Can't apply \"joined loader\" strategy to property \"Screening.screening_type\", which is a \"column property\"; this loader strategy is intended to be used with a \"relationship property\".", "module": "app", "function": "handle_unexpected_error", "line": 427, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.222396Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/patients/2/prep_sheet?v=1753632656", "module": "app", "function": "handle_unexpected_error", "line": 428, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.222635Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/patients/2/prep_sheet?v=1753632656", "module": "app", "function": "handle_unexpected_error", "line": 428, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.222890Z", "level": "CRITICAL", "logger": "app", "message": "Method: GET", "module": "app", "function": "handle_unexpected_error", "line": 429, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.223143Z", "level": "CRITICAL", "logger": "app", "message": "Method: GET", "module": "app", "function": "handle_unexpected_error", "line": 429, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.223412Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.4.151", "module": "app", "function": "handle_unexpected_error", "line": 430, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.223638Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.4.151", "module": "app", "function": "handle_unexpected_error", "line": 430, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.283715Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/demo_routes.py\", line 890, in generate_patient_prep_sheet\n    .all()\n     ^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2704, in all\n    return self._iter().all()  # type: ignore\n           ^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2858, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 523, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1630, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 711, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 320, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/visitors.py\", line 141, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/compiler.py\", line 4728, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/base.py\", line 686, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 1246, in _create_orm_context\n    self._setup_for_generate()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 1360, in _setup_for_generate\n    entity.setup_compile_state(self)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 2834, in setup_compile_state\n    loading._setup_entity_query(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/loading.py\", line 776, in _setup_entity_query\n    value.setup(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/interfaces.py\", line 1071, in setup\n    strat = self._get_strategy(loader.strategy)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/interfaces.py\", line 1054, in _get_strategy\n    cls = self._strategy_lookup(self, *key)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/interfaces.py\", line 1158, in _strategy_lookup\n    raise orm_exc.LoaderStrategyException(\nsqlalchemy.orm.exc.LoaderStrategyException: Can't apply \"joined loader\" strategy to property \"Screening.screening_type\", which is a \"column property\"; this loader strategy is intended to be used with a \"relationship property\".\n", "module": "app", "function": "handle_unexpected_error", "line": 431, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.284099Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/demo_routes.py\", line 890, in generate_patient_prep_sheet\n    .all()\n     ^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2704, in all\n    return self._iter().all()  # type: ignore\n           ^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py\", line 2858, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 523, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1630, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n                                                ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 711, in _compile_w_cache\n    compiled_sql = self._compiler(\n                   ^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 320, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/compiler.py\", line 1446, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/compiler.py\", line 886, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/compiler.py\", line 932, in process\n    return obj._compiler_dispatch(self, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/visitors.py\", line 141, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n           ^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/compiler.py\", line 4728, in visit_select\n    compile_state = select_stmt._compile_state_factory(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/base.py\", line 686, in create_for_statement\n    return klass.create_for_statement(statement, compiler, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 447, in create_for_statement\n    return cls._create_orm_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 1246, in _create_orm_context\n    self._setup_for_generate()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 1360, in _setup_for_generate\n    entity.setup_compile_state(self)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py\", line 2834, in setup_compile_state\n    loading._setup_entity_query(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/loading.py\", line 776, in _setup_entity_query\n    value.setup(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/interfaces.py\", line 1071, in setup\n    strat = self._get_strategy(loader.strategy)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/interfaces.py\", line 1054, in _get_strategy\n    cls = self._strategy_lookup(self, *key)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/interfaces.py\", line 1158, in _strategy_lookup\n    raise orm_exc.LoaderStrategyException(\nsqlalchemy.orm.exc.LoaderStrategyException: Can't apply \"joined loader\" strategy to property \"Screening.screening_type\", which is a \"column property\"; this loader strategy is intended to be used with a \"relationship property\".\n", "module": "app", "function": "handle_unexpected_error", "line": 431, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}
{"timestamp": "2025-07-27T16:11:54.572383Z", "level": "WARNING", "logger": "api_access_middleware", "message": "API response: /patients/2/prep_sheet -> 500", "module": "api_access_middleware", "function": "log_api_response_status", "line": 449, "thread": 139818132262080, "process": 233, "request": {"method": "GET", "path": "/patients/2/prep_sheet", "remote_addr": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "generate_patient_prep_sheet"}, "session": {"session_id": "4rZ7yFJntjCAGiE4sL2uC0bnKMh6qW3VXJ6p8Pmfd3Q", "user_id": null, "username": null}, "security": {"ip_address": "10.82.4.151", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1753632713.082308}}