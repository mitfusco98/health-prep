Database error in edit_screening_type: cannot access local variable 'json' where it is not associated with a value
{"timestamp": "2025-06-22T17:11:06.509883Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [20c221ba]:", "module": "app", "function": "handle_unexpected_error", "line": 419, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.510574Z", "level": "CRITICAL", "logger": "app", "message": "Unexpected Error [20c221ba]:", "module": "app", "function": "handle_unexpected_error", "line": 419, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.510833Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: UnboundLocalError", "module": "app", "function": "handle_unexpected_error", "line": 420, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.511031Z", "level": "CRITICAL", "logger": "app", "message": "Error Type: UnboundLocalError", "module": "app", "function": "handle_unexpected_error", "line": 420, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.511242Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: cannot access local variable 'json' where it is not associated with a value", "module": "app", "function": "handle_unexpected_error", "line": 421, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.511428Z", "level": "CRITICAL", "logger": "app", "message": "Error Message: cannot access local variable 'json' where it is not associated with a value", "module": "app", "function": "handle_unexpected_error", "line": 421, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.511710Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/screening-types/17/edit", "module": "app", "function": "handle_unexpected_error", "line": 422, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.511868Z", "level": "CRITICAL", "logger": "app", "message": "URL: https://b1b46abe-838d-464d-8410-80c925647698-00-1zl7ablirpohy.kirk.replit.dev/screening-types/17/edit", "module": "app", "function": "handle_unexpected_error", "line": 422, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.512073Z", "level": "CRITICAL", "logger": "app", "message": "Method: POST", "module": "app", "function": "handle_unexpected_error", "line": 423, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.512266Z", "level": "CRITICAL", "logger": "app", "message": "Method: POST", "module": "app", "function": "handle_unexpected_error", "line": 423, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.512469Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.1.89", "module": "app", "function": "handle_unexpected_error", "line": 424, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.512614Z", "level": "CRITICAL", "logger": "app", "message": "Remote Address: 10.82.1.89", "module": "app", "function": "handle_unexpected_error", "line": 424, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.531960Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/demo_routes.py\", line 1199, in edit_screening_type\n    content_keywords = json.loads(keywords_data)\n                       ^^^^\nUnboundLocalError: cannot access local variable 'json' where it is not associated with a value\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/db_utils.py\", line 106, in wrapper\n    result = func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/demo_routes.py\", line 1219, in edit_screening_type\n    except (json.JSONDecodeError, ValueError) as e:\n            ^^^^\nUnboundLocalError: cannot access local variable 'json' where it is not associated with a value\n", "module": "app", "function": "handle_unexpected_error", "line": 425, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.532276Z", "level": "CRITICAL", "logger": "app", "message": "Stack Trace:\nTraceback (most recent call last):\n  File \"/home/runner/workspace/demo_routes.py\", line 1199, in edit_screening_type\n    content_keywords = json.loads(keywords_data)\n                       ^^^^\nUnboundLocalError: cannot access local variable 'json' where it is not associated with a value\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/db_utils.py\", line 106, in wrapper\n    result = func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/demo_routes.py\", line 1219, in edit_screening_type\n    except (json.JSONDecodeError, ValueError) as e:\n            ^^^^\nUnboundLocalError: cannot access local variable 'json' where it is not associated with a value\n", "module": "app", "function": "handle_unexpected_error", "line": 425, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
{"timestamp": "2025-06-22T17:11:06.728006Z", "level": "WARNING", "logger": "api_access_middleware", "message": "API response: /screening-types/17/edit -> 500", "module": "api_access_middleware", "function": "log_api_response_status", "line": 449, "thread": 139971541272064, "process": 1157, "request": {"method": "POST", "path": "/screening-types/17/edit", "remote_addr": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "endpoint": "edit_screening_type"}, "session": {"session_id": "BJOT-1kZAiVooTDHrl2XzDTaCVaTkfNpBoZeCBMC7LQ", "user_id": null, "username": null}, "security": {"ip_address": "10.82.1.89", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Replit/1.0.14 Chrome/124.0.6367.119 Electron/30.0.3 Safari/537.36", "timestamp": 1750612266.2511642}}
